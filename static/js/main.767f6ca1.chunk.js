(this.webpackJsonpmoontrip=this.webpackJsonpmoontrip||[]).push([[0],{13:function(e,t,n){e.exports={controllerContainer:"controller_controllerContainer__18j9a"}},18:function(e,t,n){},19:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),i=n(11),c=n.n(i),a=(n(18),n(19),n(7)),s=n(8),u=n(3),l=n(10),d=n.n(l),f=n(12),p=n(0),h=(p.Engine.create({gravity:{scale:0}}),["images/space/asteroid-1-r.png","images/space/asteroid-2-r.svg","images/space/asteroid-3-r.svg","images/space/asteroid-4-r.svg","images/space/earth-resized.png"]),v={width:4e3,height:4e3,wireframes:!1,background:"#1d1135"},g=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"image/svg+xml")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){return g("./images/space/corner4.svg").then((function(e){var t="#063e7b",n=function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))}(e,"path").map((function(e){return p.Svg.pathToVertices(e,30)}));return[[71,71],[v.width-71,71],[v.width-71,v.height-71],[71,v.height-71]].map((function(e,o){var r=Object(u.a)(e,2),i=r[0],c=r[1],a=p.Bodies.fromVertices(i,c,n,{render:{fillStyle:t,strokeStyle:t,lineWidth:1},isStatic:!0},!0);return p.Body.rotate(a,Math.PI/2*o),a}))}))},j=function e(t,n){for(var o=p.Vector.create(t.x+Math.random()*(n.x-t.x),t.y+Math.random()*(n.y-t.y)),r=0,i=[b,y,O];r<i.length;r++){var c=i[r];if(p.Vector.magnitude(p.Vector.sub(c.position,o))<300)return e(t,n)}return o},b=p.Bodies.trapezoid(1200,3e3,175,213,1,{render:{sprite:{texture:"images/space/resized-color-2.png",xScale:.5,yScale:.5,xOffset:.17,yOffset:.15}},angle:Math.PI/2,friction:1,frictionAir:.01,collisionFilter:{mask:1},density:.1,restitution:.1}),x=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isStatic:!1},r=o.isStatic,i=o.pos;if(i)t=i.x,n=i.y;else{var c=j(p.Vector.create(125,125),p.Vector.create(v.width-125,v.height-125)),a=c.x,s=c.y;t=a,n=s}return p.Bodies.circle(t,n,100,{render:{sprite:{texture:h[e-1],xScale:2,yScale:2}},angle:Math.PI/2,friction:1,frictionAir:0,collisionFilter:{mask:1},density:1,restitution:1,isStatic:r})},y=x(4,{pos:{x:3e3,y:1e3},isStatic:!0}),O=x(5,{pos:{x:1e3,y:3e3},isStatic:!0}),w=Array(10).fill(0).map((function(e){return x(1)})),_=n(6),S=n.n(_),E=n(1);function C(e){var t=e.checked,n=e.toggle,o=e.children;return Object(E.jsxs)("div",{className:S.a.switchContainer,children:[Object(E.jsxs)("label",{className:S.a.switch,children:[Object(E.jsx)("input",{type:"checkbox",checked:t,onChange:n}),Object(E.jsx)("span",{className:"".concat(S.a.slider," ").concat(S.a.round)})]}),Object(E.jsx)("div",{children:o})]})}var k=function(e){return e.split("").reduce((function(e,t,n){return t===t.toLowerCase()?0===n?e.push(t.toUpperCase()):e.push(t):e.push(" ".concat(t)),e}),[]).join("")},M=n(4),V=n.n(M),B=n(5),R=n.n(B);function U(e){var t=e.size,n=void 0===t?5:t,r=e.power,i=e.change,c=Object(o.useRef)(null),a=function(e){if(c.current){var t=c.current.getBoundingClientRect(),o=t.width,r=(e-t.left)/o*100,a=Math.round(r/(100/(n-1)));i(a)}},s=function(e){a(e.clientX)},u=function e(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e)},l=function(e){a(e.changedTouches[0].clientX)},d=function e(t){t.preventDefault(),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",e)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{children:"\ud83d\udd25 Engine Power"}),Object(E.jsxs)("div",{className:R.a.slider,ref:c,onMouseDown:function(e){e.preventDefault(),0===e.button&&(s(e),document.addEventListener("mousemove",s),document.addEventListener("mouseup",u))},onTouchStart:function(e){l(e),document.addEventListener("touchmove",l),document.addEventListener("touchend",d)},children:[Object(E.jsx)("span",{className:R.a.rail}),Object(E.jsx)("span",{className:R.a.bar,style:{width:"".concat(r/(n-1)*100,"%")}}),Array(n).fill(0).map((function(e,t){return Object(E.jsx)("span",{className:R.a.step,style:{left:"".concat(t/(n-1)*100,"%")}},t)})),Object(E.jsx)("span",{className:R.a.thumb,style:{left:"".concat(r/(n-1)*100,"%")}})]})]})}var L=n(13),N=n.n(L);function T(e){var t=e.rotateLeft,n=e.rotateRight,o=e.cancel;return Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{children:"\ud83d\udd79\ufe0f Controller"}),Object(E.jsxs)("div",{className:N.a.controllerContainer,children:[Object(E.jsx)("span",{onMouseDown:t,onMouseUp:o,onTouchStart:t,onTouchEnd:function(e){e.preventDefault(),o()},children:"\u25c0"}),Object(E.jsx)("span",{onMouseDown:n,onMouseUp:o,onTouchStart:n,onTouchEnd:function(e){e.preventDefault(),o()},children:"\u25b6"})]})]})}function F(){var e=Object(o.useRef)(null),t=Object(o.useState)({}),r=Object(u.a)(t,2),i=r[0],c=r[1],l=Object(o.useState)({boost:!1,zoomIn:!1,guide:!0}),d=Object(u.a)(l,2),f=d[0],h=d[1],g=Object(o.useState)(0),j=Object(u.a)(g,2),x=j[0],_=j[1],S=Object(o.useState)(1),M=Object(u.a)(S,2),B=M[0],R=M[1];return Object(o.useEffect)((function(){p.Common.setDecomp(n(23));var t=p.Engine.create({gravity:{scale:0}}),o=p.Render.create({canvas:e.current,engine:t,options:v});p.Composite.add(t.world,b),p.Composite.add(t.world,[y,O]),p.Composite.add(t.world,w),m().then((function(e){p.Composite.add(t.world,e)}));var r=v.width,i=v.height;p.Composite.add(t.world,[p.Bodies.rectangle(r/2,0,r,50,{isStatic:!0,render:{fillStyle:"#063e7b"}}),p.Bodies.rectangle(r/2,i,r,50,{isStatic:!0,render:{fillStyle:"#063e7b"}}),p.Bodies.rectangle(r,i/2,50,i,{isStatic:!0,render:{fillStyle:"#063e7b"}}),p.Bodies.rectangle(0,i/2,50,i,{isStatic:!0,render:{fillStyle:"#063e7b"}})]);var a=p.Mouse.create(o.canvas),s=p.MouseConstraint.create(t,{mouse:a,constraint:{stiffness:.2,render:{visible:!0}},collisionFilter:{mask:1}});p.Composite.add(t.world,s),p.Render.run(o);var u=p.Runner.create();return p.Runner.run(u,t),c({engine:t,render:o}),function(){p.Render.stop(o),p.Runner.stop(u),console.log("render stop")}}),[]),Object(o.useEffect)((function(){var e=i.engine,t=i.render;if(e&&t){var n=function(){var e=p.Vector.create(0,0);[y,O].forEach((function(t){var n=p.Vector.sub(t.position,b.position);p.Vector.add(e,p.Vector.mult(p.Vector.div(n,Math.pow(p.Vector.magnitude(n),2)),30),e)})),p.Body.applyForce(b,b.position,e)};return p.Events.on(e,"afterUpdate",n),function(){p.Events.off(e,"afterUpdate",n),console.log("gravity stopped")}}}),[i]),Object(o.useEffect)((function(){var e=i.engine,t=i.render;if(e&&t&&f.boost){var n=[],o=0,r=function(){o++,n.forEach((function(e){e.render.opacity&&(e.render.opacity*=.9),p.Body.scale(e,1.02,1.02)}));var t=p.Vector.clone(b.position),r=p.Vector.create(Math.sin(b.angle),-Math.cos(b.angle));if(p.Body.applyForce(b,t,p.Vector.mult(r,.2*(B+1))),15===o){o=0;var i=p.Bodies.circle(t.x-90*r.x,t.y-90*r.y,25,{render:{fillStyle:"skyblue"},collisionFilter:{category:2},isSensor:!0});n.unshift(i),p.Composite.add(e.world,i),5===n.length&&p.Composite.remove(e.world,n.pop()),n.forEach((function(e){return p.Body.applyForce(e,e.position,p.Vector.div(r,-100))}))}};return p.Events.on(i.engine,"afterUpdate",r),function(){console.log("boost stopped"),n.forEach((function(t){return p.Composite.remove(e.world,t)})),p.Events.off(i.engine,"afterUpdate",r)}}}),[i,f.boost,B]),Object(o.useEffect)((function(){var e=i.engine,t=i.render;if(e&&t){if(f.zoomIn){var n=function(){var e=b.position,t=e.x,n=e.y;p.Render.lookAt(i.render,{min:{x:t-400,y:n-400},max:{x:t+400,y:n+400}})};return p.Events.on(i.engine,"afterUpdate",n),function(){console.log("camera stopped"),p.Events.off(i.engine,"afterUpdate",n)}}p.Render.lookAt(t,{min:{x:0,y:0},max:{x:v.width,y:v.height}})}}),[i,f.zoomIn]),Object(o.useEffect)((function(){var e=i.engine,t=i.render,n=f.guide,o=f.zoomIn;if(e&&t&&n){var r=function(){var e=p.Vector.sub(y.position,b.position),n=0|p.Vector.magnitude(e);if(!(n<300)){var r=b.position,i=r.x,c=r.y,a=t.context;a.strokeStyle="white",a.lineWidth=11,a.beginPath(),a.setLineDash([50,100]);var u=o?{x:v.width/2,y:v.height/2}:{x:i,y:c};a.moveTo(u.x,u.y);var l=o?v.width/800:1,d=o?{x:v.width/2+e.x*l,y:v.height/2+e.y*l}:Object(s.a)({},y.position);a.lineTo(d.x,d.y),a.stroke(),a.font="200px sans",a.fillStyle="white",a.fillText("Moon: ".concat(n,"km"),u.x-700,u.y+(o?600:300))}};return p.Events.on(i.engine,"afterUpdate",r),function(){console.log("guide stopped"),p.Events.off(i.engine,"afterUpdate",r)}}}),[i,f.zoomIn,f.guide]),Object(o.useEffect)((function(){if(console.log(x),x){var e=function(){b.torque=30*x};return p.Events.on(i.engine,"afterUpdate",e),function(){console.log("rotation stopped"),p.Events.off(i.engine,"afterUpdate",e)}}}),[i,x]),Object(E.jsxs)("div",{className:V.a.spaceContainer,children:[Object(E.jsx)("div",{className:V.a.title,children:"\ud83d\ude80 Trip to the Moon"}),Object(E.jsx)("canvas",{ref:e,style:{width:"100%",borderRadius:"20px"}}),Object(E.jsxs)("div",{className:V.a.controlPanel,children:[Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{className:V.a.flexbox,children:[Object(E.jsx)(T,{rotateLeft:function(){return _(-1)},rotateRight:function(){return _(1)},cancel:function(){return _(0)}}),Object(E.jsx)("div",{className:V.a.optionContainer,children:Object.keys(f).map((function(e,t){var n=e,o=f[n];return Object(E.jsx)(C,{checked:o,toggle:function(){return h(Object(s.a)(Object(s.a)({},f),{},Object(a.a)({},e,!o)))},children:k(n)},t)}))})]}),Object(E.jsx)(U,{power:B,change:function(e){return R(e)}})]})]})}var P=function(){return Object(E.jsx)("div",{style:{display:"flex",alignItems:"center",height:"100%"},children:Object(E.jsx)(F,{})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),i(e),c(e)}))};n(24);c.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(P,{})}),document.getElementById("root")),D()},4:function(e,t,n){e.exports={spaceContainer:"space_spaceContainer__2Kbgu",controlPanel:"space_controlPanel__1yvsf",optionContainer:"space_optionContainer__YvUj0",flexbox:"space_flexbox__30PBO",title:"space_title__2lGYu"}},5:function(e,t,n){e.exports={slider:"gear_slider__2vTBv",step:"gear_step__2VqHv",rail:"gear_rail__1p-g4",bar:"gear_bar__1e6Hm",thumb:"gear_thumb__kC3pp"}},6:function(e,t,n){e.exports={switch:"switch_switch__1UH8j",slider:"switch_slider__3leRR",round:"switch_round__2_W7E",switchContainer:"switch_switchContainer__3UYYg"}}},[[25,1,2]]]);
//# sourceMappingURL=main.767f6ca1.chunk.js.map